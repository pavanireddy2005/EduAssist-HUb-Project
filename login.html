<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Login - EduAssist Hub</title>
    <link rel="shortcut icon" href="logo.jpeg" />
    <link rel="stylesheet" href="login.css" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>

  <body>
    <!-- ================= NAVBAR ================= -->
    <header class="navbar">
      <div class="nav-container">
        <a class="logo" href="index.html">
          <img src="logo.jpeg" alt="EduAssist Hub Logo" />
          <p class="logo-name"><b>EduAssist Hub</b></p>
        </a>

        <nav class="nav-links">
          <a href="index.html">Home</a>
          <a href="aboutus.html">About Us</a>
          <a href="contact.html">Contact</a>
          <a href="login.html" class="btn-login">Login / Sign Up</a>
        </nav>
      </div>
    </header>

    <!-- ================= AUTH CONTAINER ================= -->
    <div class="auth-container">
      <!-- LOGIN -->
      <div class="auth-box" id="loginForm">
        <h2>Login</h2>

        <input type="email" id="loginEmail" placeholder="Email Address" />
        <input type="password" id="loginPassword" placeholder="Password" />

        <a href="#" class="forgot-link" onclick="showForgotForm()"
          >Forgot Password?</a
        >

        <button class="login-btn" onclick="loginUser()">Login</button>
        <p id="loginError" class="error-msg"></p>

        <p>
          Don't have an account?
          <a href="#" onclick="showSignupForm()">Sign Up</a>
        </p>
      </div>

      <!-- SIGNUP -->
      <div class="auth-box" id="signupForm" style="display: none">
        <h2>Sign Up</h2>

        <input type="email" id="signupEmail" placeholder="Email Address" />
        <input type="password" id="signupPassword" placeholder="Password" />

        <button class="login-btn" onclick="signupUser()">Create Account</button>

        <p>
          Already have an account?
          <a href="#" onclick="showLoginForm()">Login</a>
        </p>

        <p id="signupMessage"></p>
      </div>

      <!-- FORGOT PASSWORD -->
      <div class="auth-box" id="forgotForm" style="display: none">
        <h2>Reset Password</h2>

        <input
          type="email"
          id="resetEmail"
          placeholder="Enter your registered email"
        />

        <button class="login-btn" onclick="sendResetEmail()">
          Send Reset Link
        </button>
        <p id="resetMessage"></p>

        <p><a href="#" onclick="showLoginForm()">← Back to Login</a></p>
      </div>
    </div>

    <!-- ================= FIREBASE ================= -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyBSTIpOEBIqmLqYoXIeus3ydb8op1_1Bhs",
        authDomain: "eduassist-hub-57c4f.firebaseapp.com",
        projectId: "eduassist-hub-57c4f",
        storageBucket: "eduassist-hub-57c4f.firebasestorage.app",
        messagingSenderId: "383241607046",
        appId: "1:383241607046:web:bb9351db21794cb9587e07",
        measurementId: "G-E24KFP61JS",
      };
    </script>
    <script>
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
    </script>

    <!-- ================= AUTH LOGIC ================= -->
    <script>
      function sendResetEmail() {
        const email = document.getElementById("resetEmail").value.trim();
        const msg = document.getElementById("resetMessage");

        msg.textContent = "";
        msg.className = "";

        if (!email) {
          msg.textContent = "Please enter your email address.";
          msg.className = "error-msg";
          return;
        }

        auth
          .sendPasswordResetEmail(email)
          .then(() => {
            msg.textContent = "✅ Password reset link sent. Check your email.";
            msg.className = "success-msg";

            // Optional: return to login after 3 seconds
            setTimeout(() => {
              showLoginForm();
              msg.textContent = "";
            }, 3000);
          })
          .catch((error) => {
            if (error.code === "auth/user-not-found") {
              msg.textContent = "❌ No account found with this email.";
            } else if (error.code === "auth/invalid-email") {
              msg.textContent = "❌ Invalid email address.";
            } else {
              msg.textContent = error.message;
            }
            msg.className = "error-msg";
          });
      }
    </script>

    <script>
      function loginUser() {
        const email = document.getElementById("loginEmail").value;
        const password = document.getElementById("loginPassword").value;
        const errorBox = document.getElementById("loginError");

        errorBox.textContent = "";

        if (!email || !password) {
          errorBox.textContent = "Please enter email and password.";
          return;
        }

        auth
          .signInWithEmailAndPassword(email, password)
          .then(() => {
            localStorage.setItem("isLoggedIn", "true");
            window.location.href = "dashboard.html";
          })
          .catch((error) => {
            if (error.code === "auth/invalid-login-credentials") {
              errorBox.textContent = "❌ Invalid email or password.";
            } else if (error.code === "auth/user-not-found") {
              errorBox.textContent = "❌ No account found with this email.";
            } else {
              errorBox.textContent = error.message;
            }

            document.getElementById("loginPassword").value = "";
          });
      }
    </script>
    <script>
      function showSignupForm() {
        document.getElementById("loginForm").style.display = "none";
        document.getElementById("forgotForm").style.display = "none";
        document.getElementById("signupForm").style.display = "block";
      }

      function showLoginForm() {
        document.getElementById("signupForm").style.display = "none";
        document.getElementById("forgotForm").style.display = "none";
        document.getElementById("loginForm").style.display = "block";
      }

      function showForgotForm() {
        document.getElementById("loginForm").style.display = "none";
        document.getElementById("signupForm").style.display = "none";
        document.getElementById("forgotForm").style.display = "block";
      }
    </script>
    <script>
      function signupUser() {
        const email = document.getElementById("signupEmail").value.trim();
        const password = document.getElementById("signupPassword").value.trim();
        const msg = document.getElementById("signupMessage");

        msg.textContent = "";
        msg.className = "";

        if (!email || !password) {
          msg.textContent = "Please enter email and password.";
          msg.className = "error-msg";
          return;
        }

        if (password.length < 6) {
          msg.textContent = "Password must be at least 6 characters.";
          msg.className = "error-msg";
          return;
        }

        auth
          .createUserWithEmailAndPassword(email, password)
          .then(() => {
            localStorage.setItem("isLoggedIn", "true");

            msg.textContent = "✅ Account created successfully!";
            msg.className = "success-msg";

            setTimeout(() => {
              window.location.href = "dashboard.html";
            }, 1200);
          })
          .catch((error) => {
            if (error.code === "auth/email-already-in-use") {
              msg.textContent = "❌ Email already registered.";
            } else if (error.code === "auth/invalid-email") {
              msg.textContent = "❌ Invalid email address.";
            } else {
              msg.textContent = error.message;
            }
            msg.className = "error-msg";
          });
      }
    </script>

    <!-- ================= FOOTER ================= -->
    <footer class="custom-footer">
      <div class="footer-container">
        <!-- Left Section -->
        <div class="footer-column">
          <h2 class="footer-logo">EduAssist Hub</h2>
          <p class="footer-text">
            Your all-in-one study companion for tech courses, concepts, and
            quick revision.
          </p>

          <div class="social-icons">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-x-twitter"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-discord"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>

          <div class="footer-links">
            <a href="#">Our Blogs</a>
            <a href="#">Privacy Policy</a>
            <a href="#">Terms of Service</a>
            <a href="#">Cookie Policy</a>
            <a href="#">Cookie Settings</a>
          </div>
        </div>

        <!-- Middle Section -->
        <div class="footer-column">
          <h3>Contact with us:</h3>

          <p class="footer-sub">For Business Inquiry:</p>
          <p><i class="fas fa-envelope"></i> support@eduassishub.com</p>

          <p class="footer-sub">For Support & Queries:</p>
          <p><i class="fas fa-envelope"></i> info@eduassisthub.com</p>

          <p class="footer-sub">Call:</p>
          <p><i class="fas fa-phone"></i> +91 98765 43210</p>
        </div>

        <!-- Right Section -->
        <div class="footer-column">
          <h3>Corporate Address:</h3>

          <p class="footer-sub">India:</p>
          <p>
            Hyderabad:<br />
            Skyview Tech Park, Level 6,<br />
            Sector 5, Madhapur, Telangana 500081
          </p>

          <p class="footer-sub">Bengaluru:</p>
          <p>
            Orion Tech Square,<br />
            3rd Floor, Victoria Road,<br />
            Bengaluru, Karnataka 560047
          </p>

          <p class="footer-sub">USA:</p>
          <p>
            California:<br />
            2250 Innovation Drive,<br />
            Sunnyvale, CA 94087
          </p>
        </div>
      </div>

      <div class="footer-bottom">
        <p>2026 © All rights reserved by EduAssist Hub</p>
      </div>
    </footer>
  </body>
</html>
